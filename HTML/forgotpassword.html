<!DOCTYPE html>
<html lang="en">
<head>
	<title>The Dino Game | Forgot Password?</title>
	<link rel="stylesheet" type="text/css" href="..\CSS\styles.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">
</head>
<body style="background-color: #18408f;">
	<div class="categorynavbar-right">
		<h2 class="logo">The Dino Game</h2>
		<ul>
			<li><a href="..\HTML\index.html">Home</a></li>
			<li><a href="..\HTML\leaderboard.html">Leaderboard</a></li>
			<li><a href="..\HTML\login.html">Login</a></li>
			<li><a href="..\HTML\signup.html">Sign Up</a></li>
		</ul>
	</div>
	<!-- Forgot Password content -->
	<div class="fp-content">
		<div class="fp-box">
			<h1>Forgot Password?</h1>
			<br>
			<!-- New password input field -->
			<input type="password" id="newpass" placeholder="Enter new password *">
			<br><br>
			<!-- Confirm new password input field -->
			<input type="password" id="renewpass" placeholder="Re-enter new password *">
			<br><br>
			<p>
				<!-- Link to submit the password reset -->
				<a href="..\HTML\login.html" id="fpbutton" class="fp-button">Confirm Password</a>
			</p>
		</div>
	</div>
	<img id="dino" src="..\Images\dino.png" alt="dino baby">
	<img id="tree" src="..\Images\tree.png" alt="tree">
	<div class="footer"></div>
	<!-- Password reset validation script -->
	<script>
		document.getElementById('fpbutton').addEventListener('click', function(event) {
			// Retrieving values from the password fields
			var newpass = document.getElementById('newpass').value;
			var renewpass = document.getElementById('renewpass').value;
			// Check if both password fields are filled
			if (newpass === "" || renewpass === "") {
				event.preventDefault();
				alert("You haven't filled all the required fields...");
				return;
			}
			// Check if both passwords match
			if (newpass !== renewpass) {
				event.preventDefault();
				alert("Passwords do not match. Please try again.");
				return;
			}
			// Retrieve the logged-in username from session storage
			let username = sessionStorage.loggedInUsername;
			// Check if user data exists in local storage
			if (localStorage[username]) {
				let usrObj = JSON.parse(localStorage[username]);
				usrObj.password = newpass;
				localStorage[username] = JSON.stringify(usrObj);
				alert("Password changed successfully!");
			} else {
				alert("User not found. Please try again.");
				event.preventDefault();
			}
		});
	</script>
</body>
</html>
